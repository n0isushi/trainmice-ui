generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id                String         @id @default(uuid())
  email             String         @unique
  passwordHash      String         @map("password_hash")
  fullName          String?        @map("full_name")
  role              UserRole       @default(CLIENT)
  emailVerified     Boolean        @default(false) @map("email_verified")
  verificationToken String?        @map("verification_token") @db.VarChar(255)
  tokenExpiry       DateTime?      @map("token_expiry")
  createdAt         DateTime       @default(now()) @map("created_at")
  updatedAt         DateTime       @updatedAt @map("updated_at")
  activityLogs      ActivityLog[]
  adminProfile      Admin?
  clientProfile     Client?
  notifications     Notification[]
  trainerProfile    Trainer?

  @@index([email])
  @@index([role])
  @@map("users")
}

model Client {
  id                   String                @id
  companyEmail         String                @unique @map("company_email")
  userName             String                @map("user_name")
  contactNumber        String                @map("contact_number")
  createdAt            DateTime              @default(now()) @map("created_at")
  bookingRequests      BookingRequest[]
  user                 User                  @relation(fields: [id], references: [id], onDelete: Cascade)
  customCourseRequests CustomCourseRequest[]
  eventRegistrations   EventRegistration[]

  @@map("clients")
}

model Trainer {
  id                          String                      @id
  customTrainerId             String?                     @unique @map("custom_trainer_id")
  profilePic                  String?                     @map("profile_pic") @db.Text
  icNumber                    String?                     @map("ic_number")
  fullName                    String                      @map("full_name")
  race                        String?
  phoneNumber                 String?                     @map("phone_number")
  email                       String?
  hourlyRate                  Decimal?                    @map("hourly_rate") @db.Decimal(10, 2)
  hrdcAccreditationId         String?                     @map("hrdc_accreditation_id")
  hrdcAccreditationValidUntil DateTime?                   @map("hrdc_accreditation_valid_until") @db.Date
  professionalBio             String?                     @map("professional_bio") @db.Text
  state                       String?
  city                        String?
  country                     String?
  areasOfExpertise            Json?                       @map("areas_of_expertise")
  languagesSpoken             Json?                       @map("languages_spoken")
  qualification               Json?
  workHistory                 Json?
  createdAt                   DateTime                    @default(now()) @map("created_at")
  bookingRequests             BookingRequest[]
  courseReviews               CourseReview[]
  courseTrainers              CourseTrainer[]
  courses                     Course[]
  eventEnquiries              EventEnquiry[]
  events                      Event[]
  feedbacks                   Feedback[]
  messageThreads              MessageThread[]
  pastClients                 PastClient[]
  qualifications              Qualification[]
  trainerAvailability         TrainerAvailability[]
  blockedDates                TrainerBlockedDate[]
  blockedDays                 TrainerBlockedDay[]
  trainerBookings             TrainerBooking[]
  coursesConducted            TrainerCourseConducted[]
  trainerDocuments            TrainerDocument[]
  trainerMessages             TrainerMessage?
  weeklyAvailability          TrainerWeeklyAvailability[]
  user                        User                        @relation(fields: [id], references: [id], onDelete: Cascade)
  workHistoryEntries          WorkHistory[]

  @@index([email])
  @@map("trainers")
}

model Admin {
  id                String            @id
  adminCode         String?           @unique @map("admin_code")
  email             String            @unique
  fullName          String?           @map("full_name")
  createdAt         DateTime          @default(now()) @map("created_at")
  updatedAt         DateTime          @updatedAt @map("updated_at")
  user              User              @relation(fields: [id], references: [id], onDelete: Cascade)
  trainerBookings   TrainerBooking[]
  uploadedDocuments TrainerDocument[] @relation("UploadedDocuments")
  trainerDocuments  TrainerDocument[]

  @@map("admins")
}

model Course {
  id                                 String                   @id @default(uuid())
  courseCode                         String?                  @unique @map("course_code")
  trainerId                          String?                  @map("trainer_id")
  createdBy                          String?                  @map("created_by")
  title                              String
  description                        String?                  @db.Text
  learningObjectives                 Json?                    @map("learning_objectives")
  learningOutcomes                   Json?                    @map("learning_outcomes")
  targetAudience                     String?                  @map("target_audience") @db.Text
  methodology                        String?                  @db.Text
  prerequisite                       String?                  @db.Text
  certificate                        String?                  @map("certificate")
  professionalDevelopmentPoints      String?                  @map("professional_development_points")
  professionalDevelopmentPointsOther String?                  @map("professional_development_points_other") @db.Text
  assessment                         Boolean                  @default(false)
  courseType                         Json?                    @map("course_type")
  courseMode                         Json?                    @map("course_mode")
  durationHours                      Int                      @map("duration_hours")
  durationUnit                       String?                  @default("hours") @map("duration_unit")
  modules                            Json?
  venue                              String?
  price                              Decimal?                 @db.Decimal(10, 2)
  fixedDate                          DateTime?                @map("fixed_date") @db.Date
  startDate                          DateTime?                @map("start_date") @db.Date
  endDate                            DateTime?                @map("end_date") @db.Date
  category                           String?
  city                               String?
  state                              String?
  hrdcClaimable                      Boolean                  @default(false) @map("hrdc_claimable")
  brochureUrl                        String?                  @map("brochure_url") @db.Text
  courseSequence                     Int?                     @map("course_sequence")
  status                             CourseStatus             @default(DRAFT)
  createdByAdmin                     Boolean                  @default(false) @map("created_by_admin")
  createdAt                          DateTime                 @default(now()) @map("created_at")
  updatedAt                          DateTime                 @updatedAt @map("updated_at")
  bookingRequests                    BookingRequest[]
  courseMaterials                    CourseMaterial[]
  courseReviews                      CourseReview[]
  courseSchedule                     CourseSchedule[]
  courseTrainers                     CourseTrainer[]
  trainer                            Trainer?                 @relation(fields: [trainerId], references: [id], onDelete: SetNull)
  events                             Event[]
  feedbacks                          Feedback[]
  coursesConducted                   TrainerCourseConducted[]
  TrainerDocument                    TrainerDocument[]

  @@index([trainerId])
  @@index([status])
  @@index([createdBy])
  @@index([fixedDate])
  @@map("courses")
}

model CourseMaterial {
  id         String   @id @default(uuid())
  courseId   String   @map("course_id")
  fileUrl    String   @map("file_url") @db.Text
  fileName   String   @map("file_name")
  uploadedAt DateTime @default(now()) @map("uploaded_at")
  course     Course   @relation(fields: [courseId], references: [id], onDelete: Cascade)

  @@index([courseId])
  @@map("course_materials")
}

model CourseSchedule {
  id              String   @id @default(uuid())
  courseId        String   @map("course_id")
  dayNumber       Int      @map("day_number")
  startTime       String   @map("start_time")
  endTime         String   @map("end_time")
  moduleTitle     String   @map("module_title")
  submoduleTitle  String?
  durationMinutes Int      @map("duration_minutes")
  createdAt       DateTime @default(now()) @map("created_at")
  course          Course   @relation(fields: [courseId], references: [id], onDelete: Cascade)

  @@index([courseId])
  @@map("course_schedule")
}

model BookingRequest {
  id                    String               @id @default(uuid())
  courseId              String?              @map("course_id")
  trainerId             String?              @map("trainer_id")
  clientId              String?              @map("client_id")
  requestType           BookingRequestType?  @map("request_type")
  clientName            String?              @map("client_name")
  clientEmail           String?              @map("client_email")
  requestedDate         DateTime?            @map("requested_date") @db.Date
  endDate               DateTime?            @map("end_date") @db.Date
  requestedTime         String?
  trainerAvailabilityId String?              @map("trainer_availability_id")
  status                BookingStatus        @default(PENDING)
  location              String?
  city                  String?
  state                 String?
  createdAt             DateTime             @default(now()) @map("created_at")
  client                Client?              @relation(fields: [clientId], references: [id])
  course                Course?              @relation(fields: [courseId], references: [id])
  trainerAvailability   TrainerAvailability? @relation(fields: [trainerAvailabilityId], references: [id])
  trainer               Trainer?             @relation(fields: [trainerId], references: [id])

  @@index([trainerId])
  @@index([clientId])
  @@index([status])
  @@index([trainerAvailabilityId])
  @@index([courseId], map: "booking_requests_course_id_fkey")
  @@map("booking_requests")
}

model Event {
  id                                 String              @id @default(uuid())
  courseId                           String              @map("course_id")
  eventCode                          String?             @unique @map("event_code")
  trainerId                          String?             @map("trainer_id")
  createdBy                          String?             @map("created_by")
  title                              String
  description                        String?             @db.Text
  learningObjectives                 Json?               @map("learning_objectives")
  learningOutcomes                   Json?               @map("learning_outcomes")
  targetAudience                     String?             @map("target_audience") @db.Text
  methodology                        String?             @db.Text
  prerequisite                       String?             @db.Text
  certificate                        String?             @map("certificate")
  professionalDevelopmentPoints      String?             @map("professional_development_points")
  professionalDevelopmentPointsOther String?             @map("professional_development_points_other") @db.Text
  assessment                         Boolean             @default(false)
  courseType                         Json?               @map("course_type")
  courseMode                         Json?               @map("course_mode")
  durationHours                      Int                 @map("duration_hours")
  durationUnit                       String?             @default("hours") @map("duration_unit")
  modules                            Json?
  venue                              String?
  price                              Decimal?            @db.Decimal(10, 2)
  eventDate                          DateTime            @map("event_date") @db.Date
  startDate                          DateTime?           @map("start_date") @db.Date
  endDate                            DateTime?           @map("end_date") @db.Date
  category                           String?
  city                               String?
  state                              String?
  hrdcClaimable                      Boolean             @default(false) @map("hrdc_claimable")
  brochureUrl                        String?             @map("brochure_url") @db.Text
  courseSequence                     Int?                @map("course_sequence")
  status                             EventStatus         @default(ACTIVE)
  maxPacks                           Int?                @map("max_packs")
  createdAt                          DateTime            @default(now()) @map("created_at")
  updatedAt                          DateTime            @updatedAt @map("updated_at")
  enquiries                          EventEnquiry[]
  registrations                      EventRegistration[]
  course                             Course              @relation(fields: [courseId], references: [id], onDelete: Cascade)
  trainer                            Trainer?            @relation(fields: [trainerId], references: [id])
  feedbacks                          Feedback[]

  @@index([trainerId])
  @@index([courseId])
  @@index([eventDate])
  @@index([status])
  @@map("events")
}

model EventRegistration {
  id                   String   @id @default(uuid())
  eventId              String   @map("event_id")
  clientId             String?  @map("client_id")
  clientName           String?  @map("client_name")
  clientEmail          String?  @map("client_email")
  packNumber           Int?     @map("pack_number")
  numberOfParticipants Int      @default(1) @map("number_of_participants")
  status               String   @default("REGISTERED")
  createdAt            DateTime @default(now()) @map("created_at")
  updatedAt            DateTime @updatedAt @map("updated_at")
  client               Client?  @relation(fields: [clientId], references: [id])
  event                Event    @relation(fields: [eventId], references: [id], onDelete: Cascade)

  @@index([eventId])
  @@index([clientId])
  @@map("event_registrations")
}

model TrainerAvailability {
  id              String                    @id @default(uuid())
  trainerId       String                    @map("trainer_id")
  date            DateTime                  @db.Date
  slot            TrainerAvailabilitySlot?
  status          TrainerAvailabilityStatus @default(AVAILABLE)
  startTime       String?
  endTime         String?
  createdAt       DateTime                  @default(now()) @map("created_at")
  bookingRequests BookingRequest[]
  trainer         Trainer                   @relation(fields: [trainerId], references: [id], onDelete: Cascade)

  @@index([trainerId])
  @@index([date])
  @@map("trainer_availability")
}

model TrainerBlockedDay {
  id        String   @id @default(uuid())
  trainerId String   @map("trainer_id")
  dayOfWeek Int      @map("day_of_week")
  createdAt DateTime @default(now()) @map("created_at")
  trainer   Trainer  @relation(fields: [trainerId], references: [id], onDelete: Cascade)

  @@unique([trainerId, dayOfWeek])
  @@index([trainerId])
  @@map("trainer_blocked_days")
}

model TrainerWeeklyAvailability {
  id        String   @id @default(uuid())
  trainerId String   @map("trainer_id")
  dayOfWeek Int      @map("day_of_week")
  startTime String   @map("start_time")
  endTime   String   @map("end_time")
  createdAt DateTime @default(now()) @map("created_at")
  trainer   Trainer  @relation(fields: [trainerId], references: [id], onDelete: Cascade)

  @@unique([trainerId, dayOfWeek])
  @@index([trainerId])
  @@map("trainer_weekly_availability")
}

model TrainerBlockedDate {
  id          String   @id @default(uuid())
  trainerId   String   @map("trainer_id")
  blockedDate DateTime @map("blocked_date") @db.Date
  reason      String?
  createdAt   DateTime @default(now()) @map("created_at")
  trainer     Trainer  @relation(fields: [trainerId], references: [id], onDelete: Cascade)

  @@index([trainerId])
  @@index([blockedDate])
  @@map("trainer_blocked_dates")
}

model Notification {
  id                String           @id @default(uuid())
  userId            String           @map("user_id")
  title             String
  message           String
  type              NotificationType @default(INFO)
  isRead            Boolean          @default(false) @map("is_read")
  relatedEntityType String?
  relatedEntityId   String?
  createdAt         DateTime         @default(now()) @map("created_at")
  user              User             @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId])
  @@index([isRead])
  @@map("notifications")
}

model TrainerDocument {
  id              String    @id @default(uuid())
  trainerId       String    @map("trainer_id")
  courseId        String?   @map("course_id")
  documentType    String
  fileUrl         String
  fileName        String?
  fileSize        Int?      @map("file_size")
  uploadedAt      DateTime  @default(now()) @map("uploaded_at")
  uploadedBy      String?   @map("uploaded_by")
  verified        Boolean   @default(false)
  verifiedBy      String?
  verifiedAt      DateTime?
  expiresAt       DateTime? @db.Date
  notes           String?
  createdAt       DateTime  @default(now()) @map("created_at")
  updatedAt       DateTime  @updatedAt @map("updated_at")
  course          Course?   @relation(fields: [courseId], references: [id])
  trainer         Trainer   @relation(fields: [trainerId], references: [id], onDelete: Cascade)
  uploadedByAdmin Admin?    @relation("UploadedDocuments", fields: [uploadedBy], references: [id])
  verifiedByAdmin Admin?    @relation(fields: [verifiedBy], references: [id])

  @@index([trainerId])
  @@index([courseId])
  @@index([uploadedBy], map: "trainer_documents_uploaded_by_fkey")
  @@index([verifiedBy], map: "trainer_documents_verifiedBy_fkey")
  @@map("trainer_documents")
}

model CourseReview {
  id           String   @id @default(uuid())
  trainerId    String?
  courseId     String?
  rating       Int
  review       String?
  reviewerName String?
  createdAt    DateTime @default(now()) @map("created_at")
  course       Course?  @relation(fields: [courseId], references: [id], onDelete: Cascade)
  trainer      Trainer? @relation(fields: [trainerId], references: [id], onDelete: Cascade)

  @@index([trainerId])
  @@index([courseId])
  @@map("course_reviews")
}

model Qualification {
  id                String   @id @default(uuid())
  trainerId         String
  title             String
  institution       String?
  yearObtained      Int?     @map("year_obtained")
  qualificationType String?  @map("qualification_type")
  description       String?
  createdAt         DateTime @default(now()) @map("created_at")
  trainer           Trainer  @relation(fields: [trainerId], references: [id], onDelete: Cascade)

  @@index([trainerId])
  @@map("qualifications")
}

model WorkHistory {
  id          String    @id @default(uuid())
  trainerId   String
  company     String
  position    String
  startDate   DateTime? @map("start_date") @db.Date
  endDate     DateTime? @map("end_date") @db.Date
  description String?
  createdAt   DateTime  @default(now()) @map("created_at")
  trainer     Trainer   @relation(fields: [trainerId], references: [id], onDelete: Cascade)

  @@index([trainerId])
  @@map("work_history")
}

model PastClient {
  id                 String   @id @default(uuid())
  trainerId          String
  clientName         String   @map("client_name")
  projectDescription String?  @map("project_description")
  year               Int?
  createdAt          DateTime @default(now()) @map("created_at")
  trainer            Trainer  @relation(fields: [trainerId], references: [id], onDelete: Cascade)

  @@index([trainerId])
  @@map("past_clients")
}

model CustomCourseRequest {
  id                String                     @id @default(uuid())
  clientId          String?
  courseName        String                     @map("course_name")
  reason            String?
  industry          String?
  companyName       String?                    @map("company_name")
  contactPerson     String                     @map("contact_person")
  email             String
  clientPhone       String?                    @map("client_phone")
  preferredDates    String?                    @map("preferred_dates") @db.Text
  budget            Decimal?                   @db.Decimal(10, 2)
  preferredMode     CustomCoursePreferredMode?
  status            CustomCourseRequestStatus  @default(PENDING)
  assignedTrainerId String?
  adminNotes        String?
  createdAt         DateTime                   @default(now()) @map("created_at")
  updatedAt         DateTime                   @updatedAt @map("updated_at")
  client            Client?                    @relation(fields: [clientId], references: [id])

  @@index([clientId])
  @@index([status])
  @@map("custom_course_requests")
}

model ContactSubmission {
  id        String   @id @default(uuid())
  name      String
  email     String
  phone     String?
  message   String
  createdAt DateTime @default(now()) @map("created_at")

  @@index([createdAt])
  @@map("contact_submissions")
}

model Feedback {
  id                    String    @id @default(uuid())
  trainerId             String?   @map("trainer_id")
  courseId              String?   @map("course_id")
  courseName            String?   @map("course_name")
  courseDate            DateTime? @map("course_date") @db.Date
  courseDuration        String?   @map("course_duration")
  attendance            String?   @map("attendance")
  participantName       String?   @map("participant_name")
  contentClarity        Int?      @map("content_clarity")
  objectivesAchieved    Int?      @map("objectives_achieved")
  materialsHelpful      Int?      @map("materials_helpful")
  learningEnvironment   Int?      @map("learning_environment")
  trainerKnowledge      Int?      @map("trainer_knowledge")
  trainerEngagement     Int?      @map("trainer_engagement")
  knowledgeExposure     Int?      @map("knowledge_exposure")
  knowledgeApplication  Int?      @map("knowledge_application")
  durationSuitable      Int?      @map("duration_suitable")
  recommendCourse       Int?      @map("recommend_course")
  likedMost             String?   @map("liked_most") @db.Text
  improvementSuggestion String?   @map("improvement_suggestion") @db.Text
  additionalComments    String?   @map("additional_comments") @db.Text
  recommendColleagues   Boolean?  @map("recommend_colleagues")
  referralDetails       String?   @map("referral_details") @db.Text
  futureTrainingTopics  String?   @map("future_training_topics") @db.Text
  inhouseTrainingNeeds  String?   @map("inhouse_training_needs") @db.Text
  teamBuildingInterest  String?   @map("team_building_interest") @db.Text
  eventId               String?   @map("event_id")
  createdAt             DateTime  @default(now()) @map("created_at")
  course                Course?   @relation(fields: [courseId], references: [id])
  event                 Event?    @relation(fields: [eventId], references: [id])
  trainer               Trainer?  @relation(fields: [trainerId], references: [id])

  @@index([trainerId])
  @@index([courseId])
  @@index([eventId])
  @@index([courseDate])
  @@index([createdAt])
  @@map("feedbacks")
}

model CourseTrainer {
  id         String   @id @default(uuid())
  courseId   String
  trainerId  String
  assignedAt DateTime @default(now()) @map("assigned_at")
  course     Course   @relation(fields: [courseId], references: [id], onDelete: Cascade)
  trainer    Trainer  @relation(fields: [trainerId], references: [id], onDelete: Cascade)

  @@unique([courseId, trainerId])
  @@index([courseId])
  @@index([trainerId])
  @@map("course_trainers")
}

model TrainerBooking {
  id                String               @id @default(uuid())
  trainerId         String
  courseId          String?
  bookingDate       DateTime             @map("booking_date") @db.Date
  startTime         String?
  endTime           String?
  status            TrainerBookingStatus @default(PENDING)
  finalConfirmation Boolean              @default(false) @map("final_confirmation")
  confirmedAt       DateTime?
  confirmedBy       String?
  notes             String?
  createdAt         DateTime             @default(now()) @map("created_at")
  updatedAt         DateTime             @updatedAt @map("updated_at")
  confirmedByAdmin  Admin?               @relation(fields: [confirmedBy], references: [id])
  trainer           Trainer              @relation(fields: [trainerId], references: [id], onDelete: Cascade)

  @@index([trainerId])
  @@index([bookingDate])
  @@index([status])
  @@index([confirmedBy], map: "trainer_bookings_confirmedBy_fkey")
  @@map("trainer_bookings")
}

model TrainerCourseConducted {
  id                String   @id @default(uuid())
  trainerId         String   @map("trainer_id")
  courseId          String?  @map("course_id")
  courseName        String   @map("course_name")
  dateConducted     DateTime @map("date_conducted") @db.Date
  location          String?
  participantsCount Int?     @map("participants_count")
  notes             String?  @db.Text
  createdAt         DateTime @default(now()) @map("created_at")
  updatedAt         DateTime @updatedAt @map("updated_at")
  course            Course?  @relation(fields: [courseId], references: [id])
  trainer           Trainer  @relation(fields: [trainerId], references: [id], onDelete: Cascade)

  @@unique([trainerId, courseId, dateConducted])
  @@index([trainerId])
  @@index([courseId])
  @@index([dateConducted])
  @@map("trainer_courses_conducted")
}

model ActivityLog {
  id          String       @id @default(uuid())
  userId      String?
  actionType  ActivityType @map("action_type")
  entityType  String
  entityId    String?
  description String
  metadata    Json?
  ipAddress   String?
  userAgent   String?
  createdAt   DateTime     @default(now()) @map("created_at")
  user        User?        @relation(fields: [userId], references: [id])

  @@index([userId])
  @@index([entityType, entityId])
  @@index([createdAt])
  @@map("activity_logs")
}

model MessageThread {
  id              String    @id @default(uuid())
  trainerId       String    @map("trainer_id")
  lastMessage     String?   @map("last_message")
  lastMessageTime DateTime? @map("last_message_time")
  lastMessageBy   String?   @map("last_message_by")
  unreadCount     Int       @default(0) @map("unread_count")
  createdAt       DateTime  @default(now()) @map("created_at")
  updatedAt       DateTime  @updatedAt @map("updated_at")
  trainer         Trainer   @relation(fields: [trainerId], references: [id], onDelete: Cascade)
  messages        Message[]

  @@index([trainerId])
  @@index([lastMessageTime])
  @@map("message_threads")
}

model Message {
  id         String        @id @default(uuid())
  threadId   String        @map("thread_id")
  senderType String        @map("sender_type")
  senderId   String        @map("sender_id")
  message    String        @db.Text
  isRead     Boolean       @default(false) @map("is_read")
  createdAt  DateTime      @default(now()) @map("created_at")
  thread     MessageThread @relation(fields: [threadId], references: [id], onDelete: Cascade)

  @@index([threadId])
  @@index([senderType, senderId])
  @@index([createdAt])
  @@index([isRead])
  @@map("messages")
}

model TrainerMessage {
  id              String                 @id @default(uuid())
  trainerId       String                 @unique @map("trainer_id")
  lastMessage     String                 @default("No messages yet") @map("last_message")
  lastMessageTime DateTime               @default(now()) @map("last_message_time")
  platform        TrainerMessagePlatform @default(WEBSITE)
  isRead          Boolean                @default(true) @map("is_read")
  createdAt       DateTime               @default(now()) @map("created_at")
  updatedAt       DateTime               @updatedAt @map("updated_at")
  trainer         Trainer                @relation(fields: [trainerId], references: [id], onDelete: Cascade)

  @@index([trainerId])
  @@index([lastMessageTime])
  @@map("trainer_messages")
}

model EventEnquiry {
  id              String                @id @default(uuid())
  eventId         String                @map("event_id")
  trainerId       String                @map("trainer_id")
  message         String                @db.Text
  subject         String?
  isRead          Boolean               @default(false) @map("is_read")
  unreadCount     Int                   @default(0) @map("unread_count")
  lastMessageTime DateTime?             @map("last_message_time")
  lastMessageBy   String?               @map("last_message_by")
  createdAt       DateTime              @default(now()) @map("created_at")
  updatedAt       DateTime              @updatedAt @map("updated_at")
  event           Event                 @relation(fields: [eventId], references: [id], onDelete: Cascade)
  trainer         Trainer               @relation(fields: [trainerId], references: [id], onDelete: Cascade)
  messages        EventEnquiryMessage[]

  @@index([eventId])
  @@index([trainerId])
  @@index([isRead])
  @@index([unreadCount])
  @@index([createdAt])
  @@map("event_enquiries")
}

model EventEnquiryMessage {
  id         String       @id @default(uuid())
  enquiryId  String       @map("enquiry_id")
  senderType String       @map("sender_type")
  senderId   String       @map("sender_id")
  message    String       @db.Text
  isRead     Boolean      @default(false) @map("is_read")
  createdAt  DateTime     @default(now()) @map("created_at")
  enquiry    EventEnquiry @relation(fields: [enquiryId], references: [id], onDelete: Cascade)

  @@index([enquiryId])
  @@index([senderType, senderId])
  @@index([createdAt])
  @@index([isRead])
  @@map("event_enquiry_messages")
}

enum UserRole {
  CLIENT
  TRAINER
  ADMIN
}

enum CourseStatus {
  DRAFT
  PENDING_APPROVAL
  APPROVED
  DENIED
}

enum EventStatus {
  ACTIVE
  COMPLETED
  CANCELLED
}

enum BookingRequestType {
  PUBLIC
  INHOUSE
}

enum BookingStatus {
  PENDING
  APPROVED
  DENIED
  TENTATIVE
  CONFIRMED
  CANCELLED
  COMPLETED
}

enum TrainerAvailabilitySlot {
  FULL
  SLOT1
  SLOT2
}

enum TrainerAvailabilityStatus {
  AVAILABLE
  TENTATIVE
  BOOKED
  NOT_AVAILABLE
}

enum NotificationType {
  INFO
  WARNING
  SUCCESS
  ERROR
}

enum CustomCoursePreferredMode {
  ONLINE
  IN_PERSON
  HYBRID
  IN_HOUSE
  PUBLIC
  VIRTUAL
}

enum CustomCourseRequestStatus {
  PENDING
  APPROVED
  REJECTED
  IN_PROGRESS
}

enum TrainerBookingStatus {
  PENDING
  CONFIRMED
  CANCELLED
  COMPLETED
}

enum ActivityType {
  CREATE
  UPDATE
  DELETE
  VIEW
  APPROVE
  REJECT
  CONFIRM
  CANCEL
}

enum TrainerMessagePlatform {
  WEBSITE
  WHATSAPP
  EMAIL
}
